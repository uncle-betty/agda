<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# OPTIONS_GHC -Wunused-imports #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html"><span class="hs-identifier">Agda.TypeChecking.Substitute.Class</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Arrow</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(***)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">second</span></span><span class="hs-special">)</span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.html"><span class="hs-identifier">Agda.TypeChecking.Free</span></a></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.DeBruijn.html"><span class="hs-identifier">Agda.TypeChecking.Substitute.DeBruijn</span></a></span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-comment">---------------------------------------------------------------------------</span><span>
</span><span id="line-18"></span><span class="annot"><span class="hs-comment">-- * Application</span></span><span>
</span><span id="line-19"></span><span class="hs-comment">---------------------------------------------------------------------------</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-comment">-- | Apply something to a bunch of arguments.</span><span>
</span><span id="line-22"></span><span class="hs-comment">--   Preserves blocking tags (application can never resolve blocking).</span><span>
</span><span id="line-23"></span><span class="hs-keyword">class</span><span> </span><span id="Apply"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span></span><span> </span><span id="local-6989586621681728901"><span class="annot"><a href="#local-6989586621681728901"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-24"></span><span>  </span><span id="apply"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-identifier hs-type">apply</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681728901"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">Args</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728901"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span id="applyE"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#applyE"><span class="hs-identifier hs-type">applyE</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681728901"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Elims"><span class="hs-identifier hs-type">Elims</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728901"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>  </span><span id="local-6989586621681729060"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-identifier hs-var hs-var">apply</span></a></span><span> </span><span id="local-6989586621681729062"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621681729062"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681729063"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681729063"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Elims -&gt; t
forall t. Apply t =&gt; t -&gt; Elims -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#applyE"><span class="hs-identifier hs-var">applyE</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621681729062"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">(Elims -&gt; t) -&gt; Elims -&gt; t
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Elim) -&gt; Args -&gt; Elims
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Elim
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681729063"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-comment">-- Andreas, 2018-06-18, issue #3136</span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-comment">-- This default instance should be removed to get more precise</span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-comment">-- crash locations (raise the IMPOSSIBLE in a more specific place).</span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-comment">-- applyE t es  = apply  t $ fromMaybe __IMPOSSIBLE__ $ allApplyElims es</span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-comment">-- precondition: all @es@ are @Apply@s</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="annot"><span class="hs-comment">-- | Apply to some default arguments.</span></span><span>
</span><span id="line-35"></span><span id="local-6989586621681728915"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#applys"><span class="hs-identifier hs-type">applys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728915"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728915"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728915"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-36"></span><span id="applys"><span class="annot"><span class="annottext">applys :: forall t. Apply t =&gt; t -&gt; [Term] -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#applys"><span class="hs-identifier hs-var hs-var">applys</span></a></span></span><span> </span><span id="local-6989586621681729068"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621681729068"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681729069"><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621681729069"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Args -&gt; t
forall t. Apply t =&gt; t -&gt; Args -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-identifier hs-var">apply</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621681729068"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">(Args -&gt; t) -&gt; Args -&gt; t
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Arg Term) -&gt; [Term] -&gt; Args
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621681729069"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="annot"><span class="hs-comment">-- | Apply to a single default argument.</span></span><span>
</span><span id="line-39"></span><span id="local-6989586621681728918"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#apply1"><span class="hs-identifier hs-type">apply1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728918"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728918"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728918"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-40"></span><span id="apply1"><span class="annot"><span class="annottext">apply1 :: forall t. Apply t =&gt; t -&gt; Term -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply1"><span class="hs-identifier hs-var hs-var">apply1</span></a></span></span><span> </span><span id="local-6989586621681729074"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621681729074"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681729075"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681729075"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; [Term] -&gt; t
forall t. Apply t =&gt; t -&gt; [Term] -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#applys"><span class="hs-identifier hs-var">applys</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621681729074"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681729075"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="annot"><span class="hs-comment">-- | Apply to two default arguments.</span></span><span>
</span><span id="line-43"></span><span id="local-6989586621681728920"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#apply2"><span class="hs-identifier hs-type">apply2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728920"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728920"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728920"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-44"></span><span id="apply2"><span class="annot"><span class="annottext">apply2 :: forall t. Apply t =&gt; t -&gt; Term -&gt; Term -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply2"><span class="hs-identifier hs-var hs-var">apply2</span></a></span></span><span> </span><span id="local-6989586621681729079"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621681729079"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681729080"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681729080"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621681729081"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681729081"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; [Term] -&gt; t
forall t. Apply t =&gt; t -&gt; [Term] -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#applys"><span class="hs-identifier hs-var">applys</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621681729079"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681729080"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681729081"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-comment">---------------------------------------------------------------------------</span><span>
</span><span id="line-47"></span><span class="annot"><span class="hs-comment">-- * Abstraction</span></span><span>
</span><span id="line-48"></span><span class="hs-comment">---------------------------------------------------------------------------</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="annot"><span class="hs-comment">-- | @(abstract args v) `apply` args --&gt; v[args]@.</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">class</span><span> </span><span id="Abstract"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Abstract"><span class="hs-identifier hs-var">Abstract</span></a></span></span><span> </span><span id="local-6989586621681729083"><span class="annot"><a href="#local-6989586621681729083"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-52"></span><span>  </span><span id="abstract"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-identifier hs-type">abstract</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681729083"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681729083"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-comment">---------------------------------------------------------------------------</span><span>
</span><span id="line-55"></span><span class="annot"><span class="hs-comment">-- * Substitution and shifting\/weakening\/strengthening</span></span><span>
</span><span id="line-56"></span><span class="hs-comment">---------------------------------------------------------------------------</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="annot"><span class="hs-comment">-- | Apply a substitution.</span></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-comment">-- For terms:</span><span>
</span><span id="line-61"></span><span class="hs-comment">--</span><span>
</span><span id="line-62"></span><span class="hs-comment">--  &#915; &#8866; &#961; : &#916;</span><span>
</span><span id="line-63"></span><span class="hs-comment">--  &#916; &#8866; t : A</span><span>
</span><span id="line-64"></span><span class="hs-comment">-- -----------</span><span>
</span><span id="line-65"></span><span class="hs-comment">-- &#915; &#8866; t&#961; : A&#961;</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.DeBruijn.html#DeBruijn"><span class="hs-identifier hs-type">DeBruijn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstArg"><span class="hs-identifier hs-type">SubstArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728922"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="Subst"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-var">Subst</span></a></span></span><span> </span><span id="local-6989586621681728922"><span class="annot"><a href="#local-6989586621681728922"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="SubstArg"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstArg"><span class="hs-identifier hs-var">SubstArg</span></a></span></span><span> </span><span id="local-6989586621681728922"><span class="annot"><a href="#local-6989586621681728922"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-69"></span><span>  </span><span id="applySubst"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-type">applySubst</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstArg"><span class="hs-identifier hs-type">SubstArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728922"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728922"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728922"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-keyword">default</span><span> </span><span id="applySubst"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-type">applySubst</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621681728925"><span id="local-6989586621681728926"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681728922"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="#local-6989586621681728925"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728926"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621681728925"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728926"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstArg"><span class="hs-identifier hs-type">SubstArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728922"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstArg"><span class="hs-identifier hs-type">SubstArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728926"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstArg"><span class="hs-identifier hs-type">SubstArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728922"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728922"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728922"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-72"></span><span>  </span><span id="local-6989586621681729089"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var hs-var">applySubst</span></a></span><span> </span><span id="local-6989586621681729099"><span class="annot"><span class="annottext">Substitution' (SubstArg a)
</span><a href="#local-6989586621681729099"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(b -&gt; b) -&gt; f b -&gt; f b
forall a b. (a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution' (SubstArg b) -&gt; b -&gt; b
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg a)
Substitution' (SubstArg b)
</span><a href="#local-6989586621681729099"><span class="hs-identifier hs-var">rho</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="annot"><span class="hs-comment">-- | Simple constraint alias for a `Subst` instance `a` with arg type `t`.</span></span><span>
</span><span id="line-75"></span><span class="hs-keyword">type</span><span> </span><span id="SubstWith"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstWith"><span class="hs-identifier hs-var">SubstWith</span></a></span></span><span> </span><span id="local-6989586621681729101"><span class="annot"><a href="#local-6989586621681729101"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span id="local-6989586621681729102"><span class="annot"><a href="#local-6989586621681729102"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729102"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstArg"><span class="hs-identifier hs-type">SubstArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729102"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="#local-6989586621681729101"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="annot"><span class="hs-comment">-- | `Subst` instance whose agument type is itself</span></span><span>
</span><span id="line-78"></span><span class="hs-keyword">type</span><span> </span><span id="EndoSubst"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#EndoSubst"><span class="hs-identifier hs-var">EndoSubst</span></a></span></span><span> </span><span id="local-6989586621681729103"><span class="annot"><a href="#local-6989586621681729103"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstWith"><span class="hs-identifier hs-type">SubstWith</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729103"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729103"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="annot"><span class="hs-comment">-- | `Subst` instance whose argument type is `Term`</span></span><span>
</span><span id="line-81"></span><span class="hs-keyword">type</span><span> </span><span id="TermSubst"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#TermSubst"><span class="hs-identifier hs-var">TermSubst</span></a></span></span><span> </span><span id="local-6989586621681729105"><span class="annot"><a href="#local-6989586621681729105"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstWith"><span class="hs-identifier hs-type">SubstWith</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729105"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="annot"><span class="hs-comment">-- | Raise de Bruijn index, i.e. weakening</span></span><span>
</span><span id="line-84"></span><span id="local-6989586621681728936"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-type">raise</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728936"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728936"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728936"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-85"></span><span id="raise"><span class="annot"><span class="annottext">raise :: forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var hs-var">raise</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; a -&gt; a
forall a. Subst a =&gt; Nat -&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseFrom"><span class="hs-identifier hs-var">raiseFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span id="local-6989586621681728939"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#raiseFrom"><span class="hs-identifier hs-type">raiseFrom</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728939"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728939"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728939"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-88"></span><span id="raiseFrom"><span class="annot"><span class="annottext">raiseFrom :: forall a. Subst a =&gt; Nat -&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseFrom"><span class="hs-identifier hs-var hs-var">raiseFrom</span></a></span></span><span> </span><span id="local-6989586621681729112"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729112"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681729113"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729113"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg a) -&gt; a -&gt; a
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Substitution' (SubstArg a)
forall a. Nat -&gt; Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseFromS"><span class="hs-identifier hs-var">raiseFromS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729112"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729113"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="annot"><span class="hs-comment">-- | Replace de Bruijn index i by a 'Term' in something.</span></span><span>
</span><span id="line-91"></span><span id="local-6989586621681728942"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#subst"><span class="hs-identifier hs-type">subst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728942"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstArg"><span class="hs-identifier hs-type">SubstArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728942"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728942"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728942"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-92"></span><span id="subst"><span class="annot"><span class="annottext">subst :: forall a. Subst a =&gt; Nat -&gt; SubstArg a -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#subst"><span class="hs-identifier hs-var hs-var">subst</span></a></span></span><span> </span><span id="local-6989586621681729120"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729120"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681729121"><span class="annot"><span class="annottext">SubstArg a
</span><a href="#local-6989586621681729121"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg a) -&gt; a -&gt; a
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' (SubstArg a) -&gt; a -&gt; a)
-&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; SubstArg a -&gt; Substitution' (SubstArg a)
forall a. DeBruijn a =&gt; Nat -&gt; a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#singletonS"><span class="hs-identifier hs-var">singletonS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729120"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">SubstArg a
</span><a href="#local-6989586621681729121"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span id="local-6989586621681728945"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#strengthen"><span class="hs-identifier hs-type">strengthen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728945"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html#Impossible"><span class="hs-identifier hs-type">Impossible</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728945"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728945"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-95"></span><span id="strengthen"><span class="annot"><span class="annottext">strengthen :: forall a. Subst a =&gt; Impossible -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#strengthen"><span class="hs-identifier hs-var hs-var">strengthen</span></a></span></span><span> </span><span id="local-6989586621681729126"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729126"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg a) -&gt; a -&gt; a
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Impossible -&gt; Nat -&gt; Substitution' (SubstArg a)
forall a. Impossible -&gt; Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#strengthenS"><span class="hs-identifier hs-var">strengthenS</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729126"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="hs-comment">-- | Replace what is now de Bruijn index 0, but go under n binders.</span><span>
</span><span id="line-98"></span><span class="hs-comment">--   @substUnder n u == subst n (raise n u)@.</span><span>
</span><span id="line-99"></span><span id="local-6989586621681729128"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#substUnder"><span class="hs-identifier hs-type">substUnder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729128"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstArg"><span class="hs-identifier hs-type">SubstArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729128"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681729128"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681729128"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-100"></span><span id="substUnder"><span class="annot"><span class="annottext">substUnder :: forall a. Subst a =&gt; Nat -&gt; SubstArg a -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#substUnder"><span class="hs-identifier hs-var hs-var">substUnder</span></a></span></span><span> </span><span id="local-6989586621681729134"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729134"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681729135"><span class="annot"><span class="annottext">SubstArg a
</span><a href="#local-6989586621681729135"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg a) -&gt; a -&gt; a
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution' (SubstArg a) -&gt; Substitution' (SubstArg a)
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729134"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; SubstArg a -&gt; Substitution' (SubstArg a)
forall a. DeBruijn a =&gt; Nat -&gt; a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#singletonS"><span class="hs-identifier hs-var">singletonS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">SubstArg a
</span><a href="#local-6989586621681729135"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-comment">-- | Checks whether the variable bound by the abstraction is actually</span><span>
</span><span id="line-103"></span><span class="hs-comment">-- used, and, if /not/, returns the term within, 'strengthen'ed to live in</span><span>
</span><span id="line-104"></span><span class="hs-comment">-- the context /outside/ the abstraction.</span><span>
</span><span id="line-105"></span><span class="hs-comment">-- See also 'Agda.TypeChecking.Free.isBinderUsed'.</span><span>
</span><span id="line-106"></span><span id="local-6989586621681728951"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#isNoAbs"><span class="hs-identifier hs-type">isNoAbs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Free.Lazy.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728951"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728951"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728951"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621681728951"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-107"></span><span id="isNoAbs"><span class="annot"><span class="annottext">isNoAbs :: forall a. (Free a, Subst a) =&gt; Abs a -&gt; Maybe a
</span><a href="Agda.TypeChecking.Substitute.Class.html#isNoAbs"><span class="hs-identifier hs-var hs-var">isNoAbs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-type">NoAbs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681729146"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729146"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729146"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-108"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#isNoAbs"><span class="hs-identifier hs-var">isNoAbs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681729148"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729148"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; a -&gt; Bool
forall a. Free a =&gt; Nat -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Free.html#freeIn"><span class="hs-operator hs-var">`freeIn`</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729148"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Impossible -&gt; a -&gt; a
forall a. Subst a =&gt; Impossible -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#strengthen"><span class="hs-identifier hs-var">strengthen</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729148"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="annot"><span class="hs-comment">-- ** Identity instances</span></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="SubstArg"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstArg"><span class="hs-identifier hs-var">SubstArg</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span>
</span><span id="line-116"></span><span>  </span><span id="local-6989586621681729157"><span class="annot"><span class="annottext">applySubst :: Substitution' (SubstArg QName) -&gt; QName -&gt; QName
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var hs-var hs-var">applySubst</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg QName)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681729158"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681729158"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681729158"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-comment">-- | Wrapper for types that do not contain variables (so applying a substitution is the identity).</span><span>
</span><span id="line-119"></span><span class="hs-comment">--   Useful if you have a structure of types that support substitution mixed with types that don't</span><span>
</span><span id="line-120"></span><span class="hs-comment">--   and need to apply a substitution to the full structure.</span><span>
</span><span id="line-121"></span><span class="hs-keyword">newtype</span><span> </span><span id="NoSubst"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#NoSubst"><span class="hs-identifier hs-var">NoSubst</span></a></span></span><span> </span><span id="local-6989586621681728960"><span class="annot"><a href="#local-6989586621681728960"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span id="local-6989586621681728961"><span class="annot"><a href="#local-6989586621681728961"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NoSubst"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#NoSubst"><span class="hs-identifier hs-var">NoSubst</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unNoSubst"><span class="annot"><span class="annottext">forall t a. NoSubst t a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#unNoSubst"><span class="hs-identifier hs-var hs-var">unNoSubst</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681728961"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681729162"><span id="local-6989586621681729164"><span class="annot"><span class="annottext">(forall x. NoSubst t a -&gt; Rep (NoSubst t a) x)
-&gt; (forall x. Rep (NoSubst t a) x -&gt; NoSubst t a)
-&gt; Generic (NoSubst t a)
forall x. Rep (NoSubst t a) x -&gt; NoSubst t a
forall x. NoSubst t a -&gt; Rep (NoSubst t a) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall t a x. Rep (NoSubst t a) x -&gt; NoSubst t a
forall t a x. NoSubst t a -&gt; Rep (NoSubst t a) x
$cfrom :: forall t a x. NoSubst t a -&gt; Rep (NoSubst t a) x
from :: forall x. NoSubst t a -&gt; Rep (NoSubst t a) x
$cto :: forall t a x. Rep (NoSubst t a) x -&gt; NoSubst t a
to :: forall x. Rep (NoSubst t a) x -&gt; NoSubst t a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681729171"><span class="annot"><span class="annottext">NoSubst t a -&gt; ()
(NoSubst t a -&gt; ()) -&gt; NFData (NoSubst t a)
forall a. (a -&gt; ()) -&gt; NFData a
forall t a. NFData a =&gt; NoSubst t a -&gt; ()
$crnf :: forall t a. NFData a =&gt; NoSubst t a -&gt; ()
rnf :: NoSubst t a -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681729178"><span id="local-6989586621681729180"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; NoSubst t a -&gt; NoSubst t b)
-&gt; (forall a b. a -&gt; NoSubst t b -&gt; NoSubst t a)
-&gt; Functor (NoSubst t)
forall a b. a -&gt; NoSubst t b -&gt; NoSubst t a
forall a b. (a -&gt; b) -&gt; NoSubst t a -&gt; NoSubst t b
forall t a b. a -&gt; NoSubst t b -&gt; NoSubst t a
forall t a b. (a -&gt; b) -&gt; NoSubst t a -&gt; NoSubst t b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall t a b. (a -&gt; b) -&gt; NoSubst t a -&gt; NoSubst t b
fmap :: forall a b. (a -&gt; b) -&gt; NoSubst t a -&gt; NoSubst t b
$c&lt;$ :: forall t a b. a -&gt; NoSubst t b -&gt; NoSubst t a
&lt;$ :: forall a b. a -&gt; NoSubst t b -&gt; NoSubst t a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681728984"><span id="local-6989586621681728985"><span class="annot"><a href="Agda.TypeChecking.Substitute.DeBruijn.html#DeBruijn"><span class="hs-identifier hs-type">DeBruijn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728984"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#NoSubst"><span class="hs-identifier hs-type">NoSubst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728984"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728985"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="SubstArg"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstArg"><span class="hs-identifier hs-var">SubstArg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#NoSubst"><span class="hs-identifier hs-type">NoSubst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728984"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728985"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681728984"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-126"></span><span>  </span><span id="local-6989586621681729189"><span class="annot"><span class="annottext">applySubst :: Substitution' (SubstArg (NoSubst t a))
-&gt; NoSubst t a -&gt; NoSubst t a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var hs-var hs-var">applySubst</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg (NoSubst t a))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681729190"><span class="annot"><span class="annottext">NoSubst t a
</span><a href="#local-6989586621681729190"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoSubst t a
</span><a href="#local-6989586621681729190"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="hs-comment">---------------------------------------------------------------------------</span><span>
</span><span id="line-129"></span><span class="annot"><span class="hs-comment">-- * Explicit substitutions</span></span><span>
</span><span id="line-130"></span><span class="hs-comment">---------------------------------------------------------------------------</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-comment">-- See Syntax.Internal for the definition.</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span id="local-6989586621681728986"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-type">idS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728986"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-135"></span><span id="idS"><span class="annot"><span class="annottext">idS :: forall a. Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-var hs-var">idS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' a
forall a. Substitution' a
</span><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-var">IdS</span></a></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span id="local-6989586621681729193"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-type">wkS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729193"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729193"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-138"></span><span id="wkS"><span class="annot"><span class="annottext">wkS :: forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var hs-var">wkS</span></a></span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621681729200"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729200"><span class="hs-identifier hs-var">rho</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729200"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-139"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var">wkS</span></a></span><span> </span><span id="local-6989586621681729201"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729201"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Wk"><span class="hs-identifier hs-type">Wk</span></a></span><span> </span><span id="local-6989586621681729203"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729203"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681729204"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729204"><span class="hs-identifier hs-var">rho</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#Wk"><span class="hs-identifier hs-var">Wk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729201"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729203"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729204"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-140"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var">wkS</span></a></span><span> </span><span id="local-6989586621681729206"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729206"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#EmptyS"><span class="hs-identifier hs-type">EmptyS</span></a></span><span> </span><span id="local-6989586621681729208"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729208"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Substitution' a
forall a. Impossible -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#EmptyS"><span class="hs-identifier hs-var">EmptyS</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729208"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-141"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var">wkS</span></a></span><span> </span><span id="local-6989586621681729209"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729209"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681729210"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729210"><span class="hs-identifier hs-var">rho</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#Wk"><span class="hs-identifier hs-var">Wk</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729209"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729210"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span id="local-6989586621681728992"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-type">raiseS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728992"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-144"></span><span id="raiseS"><span class="annot"><span class="annottext">raiseS :: forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var hs-var">raiseS</span></a></span></span><span> </span><span id="local-6989586621681729212"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729212"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var">wkS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729212"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
forall a. Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-var">idS</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-pragma hs-type">consS</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-147"></span><span id="local-6989586621681728994"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-type">consS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.DeBruijn.html#DeBruijn"><span class="hs-identifier hs-type">DeBruijn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728994"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728994"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728994"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728994"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-148"></span><span id="consS"><span class="annot"><span class="annottext">consS :: forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var hs-var">consS</span></a></span></span><span> </span><span id="local-6989586621681729221"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729221"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Wk"><span class="hs-identifier hs-type">Wk</span></a></span><span> </span><span id="local-6989586621681729222"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729222"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681729223"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729223"><span class="hs-identifier hs-var">rho</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681729224"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729224"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe Nat
forall a. DeBruijn a =&gt; a -&gt; Maybe Nat
</span><a href="Agda.TypeChecking.Substitute.DeBruijn.html#deBruijnView"><span class="hs-identifier hs-var">deBruijnView</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729221"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729224"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729222"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var">wkS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729222"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729223"><span class="hs-identifier hs-var">rho</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var">consS</span></a></span><span> </span><span id="local-6989586621681729226"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729226"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621681729227"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729227"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Substitution' a -&gt; Substitution' a
forall a b. a -&gt; b -&gt; b
</span><span class="hs-identifier hs-var">seq</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729226"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729226"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Substitution' a -&gt; Substitution' a
forall a. a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#%3A%23"><span class="hs-operator hs-var">:#</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729227"><span class="hs-identifier hs-var">rho</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-pragma hs-type">consS</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-pragma hs-type">Term</span></a></span><span>  </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-pragma hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-pragma hs-type">Term</span></a></span><span>  </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-pragma hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-pragma hs-type">Term</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-153"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-pragma hs-type">consS</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-pragma hs-type">Level</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-pragma hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-pragma hs-type">Level</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-pragma hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-pragma hs-type">Level</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#singletonS"><span class="hs-pragma hs-type">singletonS</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- | To replace index @n@ by term @u@, do @applySubst (singletonS n u)@.</span><span>
</span><span id="line-157"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-158"></span><span class="hs-comment">--               &#915;, &#916; &#8866; u : A</span><span>
</span><span id="line-159"></span><span class="hs-comment">--    ---------------------------------</span><span>
</span><span id="line-160"></span><span class="hs-comment">--    &#915;, &#916; &#8866; singletonS |&#916;| u : &#915;, A, &#916;</span><span>
</span><span id="line-161"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-162"></span><span id="local-6989586621681728944"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#singletonS"><span class="hs-identifier hs-type">singletonS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.DeBruijn.html#DeBruijn"><span class="hs-identifier hs-type">DeBruijn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728944"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681728944"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728944"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-163"></span><span id="singletonS"><span class="annot"><span class="annottext">singletonS :: forall a. DeBruijn a =&gt; Nat -&gt; a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#singletonS"><span class="hs-identifier hs-var hs-var">singletonS</span></a></span></span><span> </span><span id="local-6989586621681729238"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729238"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681729239"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729239"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Nat -&gt; a) -&gt; [Nat] -&gt; [a]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; a
forall a. DeBruijn a =&gt; Nat -&gt; a
</span><a href="Agda.TypeChecking.Substitute.DeBruijn.html#deBruijnVar"><span class="hs-identifier hs-var">deBruijnVar</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729238"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Substitution' a -&gt; Substitution' a
forall a. DeBruijn a =&gt; [a] -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#%2B%2B%23"><span class="hs-operator hs-var">++#</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Substitution' a -&gt; Substitution' a
forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var">consS</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729239"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729238"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span>  </span><span class="hs-comment">-- ALT: foldl (\ s i -&gt; deBruijnVar i `consS` s) (consS u $ raiseS n) $ downFrom n</span><span>
</span><span id="line-165"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#singletonS"><span class="hs-pragma hs-type">singletonS</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="annot"><span class="hs-pragma hs-type">Int</span></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-pragma hs-type">Term</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-pragma hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-pragma hs-type">Term</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-166"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#singletonS"><span class="hs-pragma hs-type">singletonS</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="annot"><span class="hs-pragma hs-type">Int</span></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-pragma hs-type">Level</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-pragma hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-pragma hs-type">Level</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span class="hs-comment">-- | Single substitution without disturbing any deBruijn indices.</span><span>
</span><span id="line-169"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-170"></span><span class="hs-comment">--             &#915;, A, &#916; &#8866; u : A</span><span>
</span><span id="line-171"></span><span class="hs-comment">--    ---------------------------------</span><span>
</span><span id="line-172"></span><span class="hs-comment">--    &#915;, A, &#916; &#8866; inplace |&#916;| u : &#915;, A, &#916;</span><span>
</span><span id="line-173"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-174"></span><span id="local-6989586621681729001"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#inplaceS"><span class="hs-identifier hs-type">inplaceS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#EndoSubst"><span class="hs-identifier hs-type">EndoSubst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729001"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681729001"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729001"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-175"></span><span id="inplaceS"><span class="annot"><span class="annottext">inplaceS :: forall a. EndoSubst a =&gt; Nat -&gt; a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#inplaceS"><span class="hs-identifier hs-var hs-var">inplaceS</span></a></span></span><span> </span><span id="local-6989586621681729254"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729254"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681729255"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729255"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; a -&gt; Substitution' a
forall a. DeBruijn a =&gt; Nat -&gt; a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#singletonS"><span class="hs-identifier hs-var">singletonS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729254"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729255"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a -&gt; Substitution' a -&gt; Substitution' a
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-operator hs-var">`composeS`</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729254"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="annot"><span class="hs-comment">-- | Lift a substitution under k binders.</span></span><span>
</span><span id="line-178"></span><span id="local-6989586621681728950"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-type">liftS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728950"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728950"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-179"></span><span id="liftS"><span class="annot"><span class="annottext">liftS :: forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var hs-var">liftS</span></a></span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621681729260"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729260"><span class="hs-identifier hs-var">rho</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729260"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-180"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span id="local-6989586621681729261"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729261"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-var">IdS</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' a
forall a. Substitution' a
</span><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-var">IdS</span></a></span><span>
</span><span id="line-181"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span id="local-6989586621681729262"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729262"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lift"><span class="hs-identifier hs-type">Lift</span></a></span><span> </span><span id="local-6989586621681729264"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729264"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681729265"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729265"><span class="hs-identifier hs-var">rho</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#Lift"><span class="hs-identifier hs-var">Lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729264"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729262"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729265"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-182"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span id="local-6989586621681729266"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729266"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681729267"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729267"><span class="hs-identifier hs-var">rho</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#Lift"><span class="hs-identifier hs-var">Lift</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729266"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729267"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-comment">-- | @</span><span>
</span><span id="line-185"></span><span class="hs-comment">--         &#915; &#8866; &#961; : &#916;, &#936;</span><span>
</span><span id="line-186"></span><span class="hs-comment">--      -------------------</span><span>
</span><span id="line-187"></span><span class="hs-comment">--      &#915; &#8866; dropS |&#936;| &#961; : &#916;</span><span>
</span><span id="line-188"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-189"></span><span id="local-6989586621681729268"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#dropS"><span class="hs-identifier hs-type">dropS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729268"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729268"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-190"></span><span id="dropS"><span class="annot"><span class="annottext">dropS :: forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#dropS"><span class="hs-identifier hs-var hs-var">dropS</span></a></span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621681729281"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729281"><span class="hs-identifier hs-var">rho</span></a></span></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729281"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-191"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#dropS"><span class="hs-identifier hs-var">dropS</span></a></span><span> </span><span id="local-6989586621681729282"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729282"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-var">IdS</span></a></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729282"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-192"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#dropS"><span class="hs-identifier hs-var">dropS</span></a></span><span> </span><span id="local-6989586621681729283"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729283"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Wk"><span class="hs-identifier hs-type">Wk</span></a></span><span> </span><span id="local-6989586621681729284"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729284"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681729285"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729285"><span class="hs-identifier hs-var">rho</span></a></span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var">wkS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729284"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#dropS"><span class="hs-identifier hs-var">dropS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729283"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729285"><span class="hs-identifier hs-var">rho</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#dropS"><span class="hs-identifier hs-var">dropS</span></a></span><span> </span><span id="local-6989586621681729286"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729286"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681729287"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729287"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#%3A%23"><span class="hs-operator hs-type">:#</span></a></span><span> </span><span id="local-6989586621681729288"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729288"><span class="hs-identifier hs-var">rho</span></a></span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#dropS"><span class="hs-identifier hs-var">dropS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729286"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729288"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-194"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#dropS"><span class="hs-identifier hs-var">dropS</span></a></span><span> </span><span id="local-6989586621681729289"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729289"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#EmptyS"><span class="hs-identifier hs-type">EmptyS</span></a></span><span> </span><span id="local-6989586621681729290"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729290"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Substitution' a
forall a. Impossible -&gt; a
</span><a href="Agda.Utils.Impossible.html#throwImpossible"><span class="hs-identifier hs-var">throwImpossible</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729290"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-195"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#dropS"><span class="hs-identifier hs-var">dropS</span></a></span><span> </span><span id="local-6989586621681729292"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729292"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lift"><span class="hs-identifier hs-type">Lift</span></a></span><span> </span><span id="local-6989586621681729293"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729293"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681729294"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729294"><span class="hs-identifier hs-var">rho</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>  </span><span class="hs-comment">-- dropS n (Lift m rho) =</span><span>
</span><span id="line-197"></span><span>  </span><span class="hs-comment">--   wkS 1 $ dropS (n - 1) $ liftS (m - 1) rho</span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729292"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729293"><span class="hs-identifier hs-var">m</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var">wkS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729293"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' a -&gt; Substitution' a)
-&gt; Substitution' a -&gt; Substitution' a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#dropS"><span class="hs-identifier hs-var">dropS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729292"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729293"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729294"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-199"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var">wkS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729292"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' a -&gt; Substitution' a)
-&gt; Substitution' a -&gt; Substitution' a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729293"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729292"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729294"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-200"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#dropS"><span class="hs-identifier hs-var">dropS</span></a></span><span> </span><span id="local-6989586621681729296"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729296"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Strengthen"><span class="hs-identifier hs-type">Strengthen</span></a></span><span> </span><span id="local-6989586621681729298"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729298"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span id="local-6989586621681729299"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729299"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681729300"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729300"><span class="hs-identifier hs-var">rho</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729296"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729299"><span class="hs-identifier hs-var">m</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#Strengthen"><span class="hs-identifier hs-var">Strengthen</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729298"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729299"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729296"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729300"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#dropS"><span class="hs-identifier hs-var">dropS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729296"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729299"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729300"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-pragma hs-type">composeS</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-205"></span><span class="annot"><span class="hs-comment">-- | @applySubst (&#961; `composeS` &#963;) v == applySubst &#961; (applySubst &#963; v)@</span></span><span>
</span><span id="line-206"></span><span id="local-6989586621681729004"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-type">composeS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#EndoSubst"><span class="hs-identifier hs-type">EndoSubst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729004"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729004"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729004"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729004"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-207"></span><span id="composeS"><span class="annot"><span class="annottext">composeS :: forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-var hs-var">composeS</span></a></span></span><span> </span><span id="local-6989586621681729322"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729322"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-var">IdS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729322"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-208"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-var">composeS</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-var">IdS</span></a></span><span> </span><span id="local-6989586621681729323"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729323"><span class="hs-identifier hs-var">sgm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729323"><span class="hs-identifier hs-var">sgm</span></a></span><span>
</span><span id="line-209"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-var">composeS</span></a></span><span> </span><span id="local-6989586621681729324"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729324"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#EmptyS"><span class="hs-identifier hs-type">EmptyS</span></a></span><span> </span><span id="local-6989586621681729325"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729325"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Substitution' a
forall a. Impossible -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#EmptyS"><span class="hs-identifier hs-var">EmptyS</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729325"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-210"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-var">composeS</span></a></span><span> </span><span id="local-6989586621681729326"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729326"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Wk"><span class="hs-identifier hs-type">Wk</span></a></span><span> </span><span id="local-6989586621681729327"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729327"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681729328"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729328"><span class="hs-identifier hs-var">sgm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' a -&gt; Substitution' a -&gt; Substitution' a
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-var">composeS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#dropS"><span class="hs-identifier hs-var">dropS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729327"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729326"><span class="hs-identifier hs-var">rho</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729328"><span class="hs-identifier hs-var">sgm</span></a></span><span>
</span><span id="line-211"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-var">composeS</span></a></span><span> </span><span id="local-6989586621681729329"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729329"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681729330"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729330"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#%3A%23"><span class="hs-operator hs-type">:#</span></a></span><span> </span><span id="local-6989586621681729331"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729331"><span class="hs-identifier hs-var">sgm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg a) -&gt; a -&gt; a
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
Substitution' (SubstArg a)
</span><a href="#local-6989586621681729329"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729330"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Substitution' a -&gt; Substitution' a
forall a. a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#%3A%23"><span class="hs-operator hs-var">:#</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a -&gt; Substitution' a -&gt; Substitution' a
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-var">composeS</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729329"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729331"><span class="hs-identifier hs-var">sgm</span></a></span><span>
</span><span id="line-212"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-var">composeS</span></a></span><span> </span><span id="local-6989586621681729332"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729332"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Strengthen"><span class="hs-identifier hs-type">Strengthen</span></a></span><span> </span><span id="local-6989586621681729333"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729333"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span id="local-6989586621681729334"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729334"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681729335"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729335"><span class="hs-identifier hs-var">sgm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#Strengthen"><span class="hs-identifier hs-var">Strengthen</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729333"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729334"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution' a -&gt; Substitution' a -&gt; Substitution' a
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-var">composeS</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729332"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729335"><span class="hs-identifier hs-var">sgm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-var">composeS</span></a></span><span> </span><span id="local-6989586621681729336"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729336"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lift"><span class="hs-identifier hs-type">Lift</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621681729337"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729337"><span class="hs-identifier hs-var">sgm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' a
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-214"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-var">composeS</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681729338"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729338"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#%3A%23"><span class="hs-operator hs-type">:#</span></a></span><span> </span><span id="local-6989586621681729339"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729339"><span class="hs-identifier hs-var">rho</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lift"><span class="hs-identifier hs-type">Lift</span></a></span><span> </span><span id="local-6989586621681729340"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729340"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681729341"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729341"><span class="hs-identifier hs-var">sgm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729338"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Substitution' a -&gt; Substitution' a
forall a. a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#%3A%23"><span class="hs-operator hs-var">:#</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a -&gt; Substitution' a -&gt; Substitution' a
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-var">composeS</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729339"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729340"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729341"><span class="hs-identifier hs-var">sgm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-var">composeS</span></a></span><span> </span><span id="local-6989586621681729342"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729342"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lift"><span class="hs-identifier hs-type">Lift</span></a></span><span> </span><span id="local-6989586621681729343"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729343"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681729344"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729344"><span class="hs-identifier hs-var">sgm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' a -&gt; Nat -&gt; a
forall a. EndoSubst a =&gt; Substitution' a -&gt; Nat -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lookupS"><span class="hs-identifier hs-var">lookupS</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729342"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Substitution' a -&gt; Substitution' a
forall a. a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#%3A%23"><span class="hs-operator hs-var">:#</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a -&gt; Substitution' a -&gt; Substitution' a
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-identifier hs-var">composeS</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729342"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var">wkS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729343"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729344"><span class="hs-identifier hs-var">sgm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="hs-comment">-- If &#915; &#8866; &#961; : &#916;, &#920; then splitS |&#920;| &#961; = (&#963;, &#948;), with</span><span>
</span><span id="line-218"></span><span class="hs-comment">--   &#915; &#8866; &#963; : &#916;</span><span>
</span><span id="line-219"></span><span class="hs-comment">--   &#915; &#8866; &#948; : &#920;&#963;</span><span>
</span><span id="line-220"></span><span id="local-6989586621681729011"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-type">splitS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729011"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729011"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729011"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-221"></span><span id="splitS"><span class="annot"><span class="annottext">splitS :: forall a.
Nat -&gt; Substitution' a -&gt; (Substitution' a, Substitution' a)
</span><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var hs-var">splitS</span></a></span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621681729374"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729374"><span class="hs-identifier hs-var">rho</span></a></span></span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729374"><span class="hs-identifier hs-var">rho</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Substitution' a
forall a. Impossible -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#EmptyS"><span class="hs-identifier hs-var">EmptyS</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
HasCallStack =&gt; Impossible
</span><a href="Agda.Utils.Impossible.html#impossible"><span class="hs-identifier hs-var">impossible</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span id="local-6989586621681729376"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729376"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681729377"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729377"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#%3A%23"><span class="hs-operator hs-type">:#</span></a></span><span> </span><span id="local-6989586621681729378"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729378"><span class="hs-identifier hs-var">rho</span></a></span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Substitution' a -&gt; Substitution' a)
-&gt; (Substitution' a, Substitution' a)
-&gt; (Substitution' a, Substitution' a)
forall b c d. (b -&gt; c) -&gt; (d, b) -&gt; (d, c)
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><span class="hs-identifier hs-var">second</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729377"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Substitution' a -&gt; Substitution' a
forall a. a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#%3A%23"><span class="hs-operator hs-var">:#</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Substitution' a, Substitution' a)
 -&gt; (Substitution' a, Substitution' a))
-&gt; (Substitution' a, Substitution' a)
-&gt; (Substitution' a, Substitution' a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; (Substitution' a, Substitution' a)
forall a.
Nat -&gt; Substitution' a -&gt; (Substitution' a, Substitution' a)
</span><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729376"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729378"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-223"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span id="local-6989586621681729379"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729379"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lift"><span class="hs-identifier hs-type">Lift</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Substitution' a, Substitution' a)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-224"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span id="local-6989586621681729380"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729380"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Wk"><span class="hs-identifier hs-type">Wk</span></a></span><span> </span><span id="local-6989586621681729381"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729381"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681729382"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729382"><span class="hs-identifier hs-var">rho</span></a></span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var">wkS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729381"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' a -&gt; Substitution' a)
-&gt; (Substitution' a -&gt; Substitution' a)
-&gt; (Substitution' a, Substitution' a)
-&gt; (Substitution' a, Substitution' a)
forall b c b' c'. (b -&gt; c) -&gt; (b' -&gt; c') -&gt; (b, b') -&gt; (c, c')
forall (a :: * -&gt; * -&gt; *) b c b' c'.
Arrow a =&gt;
a b c -&gt; a b' c' -&gt; a (b, b') (c, c')
</span><span class="hs-operator hs-var">***</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var">wkS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729381"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">((Substitution' a, Substitution' a)
 -&gt; (Substitution' a, Substitution' a))
-&gt; (Substitution' a, Substitution' a)
-&gt; (Substitution' a, Substitution' a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; (Substitution' a, Substitution' a)
forall a.
Nat -&gt; Substitution' a -&gt; (Substitution' a, Substitution' a)
</span><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729380"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729382"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-225"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span id="local-6989586621681729383"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729383"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-var">IdS</span></a></span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729383"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-226"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729383"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' a -&gt; Substitution' a)
-&gt; Substitution' a -&gt; Substitution' a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Substitution' a
forall a. Impossible -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#EmptyS"><span class="hs-identifier hs-var">EmptyS</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
HasCallStack =&gt; Impossible
</span><a href="Agda.Utils.Impossible.html#impossible"><span class="hs-identifier hs-var">impossible</span></a></span><span>
</span><span id="line-227"></span><span>                                  </span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span id="local-6989586621681729384"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729384"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lift"><span class="hs-identifier hs-type">Lift</span></a></span><span> </span><span id="local-6989586621681729385"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729385"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681729386"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729386"><span class="hs-identifier hs-var">rho</span></a></span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var">wkS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">(Substitution' a -&gt; Substitution' a)
-&gt; (Substitution' a -&gt; Substitution' a)
-&gt; (Substitution' a, Substitution' a)
-&gt; (Substitution' a, Substitution' a)
forall b c b' c'. (b -&gt; c) -&gt; (b' -&gt; c') -&gt; (b, b') -&gt; (c, c')
forall (a :: * -&gt; * -&gt; *) b c b' c'.
Arrow a =&gt;
a b c -&gt; a b' c' -&gt; a (b, b') (c, c')
</span><span class="hs-operator hs-var">***</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">((Substitution' a, Substitution' a)
 -&gt; (Substitution' a, Substitution' a))
-&gt; (Substitution' a, Substitution' a)
-&gt; (Substitution' a, Substitution' a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-229"></span><span>                                  </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; (Substitution' a, Substitution' a)
forall a.
Nat -&gt; Substitution' a -&gt; (Substitution' a, Substitution' a)
</span><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729384"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729385"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729386"><span class="hs-identifier hs-var">rho</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span id="local-6989586621681729387"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729387"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#EmptyS"><span class="hs-identifier hs-type">EmptyS</span></a></span><span> </span><span id="local-6989586621681729388"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729388"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Substitution' a, Substitution' a)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-231"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span id="local-6989586621681729389"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729389"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Strengthen"><span class="hs-identifier hs-type">Strengthen</span></a></span><span> </span><span id="local-6989586621681729390"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729390"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span id="local-6989586621681729391"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729391"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681729392"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729392"><span class="hs-identifier hs-var">rho</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-comment">-- splitS n (Strengthen err 1 rho) =</span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-comment">--   second (Strengthen err) $ splitS (n - 1) rho</span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729389"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729391"><span class="hs-identifier hs-var">m</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Substitution' a -&gt; Substitution' a)
-&gt; (Substitution' a, Substitution' a)
-&gt; (Substitution' a, Substitution' a)
forall b c d. (b -&gt; c) -&gt; (d, b) -&gt; (d, c)
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><span class="hs-identifier hs-var">second</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#Strengthen"><span class="hs-identifier hs-var">Strengthen</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729390"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729391"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Substitution' a, Substitution' a)
 -&gt; (Substitution' a, Substitution' a))
-&gt; (Substitution' a, Substitution' a)
-&gt; (Substitution' a, Substitution' a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-235"></span><span>                </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; (Substitution' a, Substitution' a)
forall a.
Nat -&gt; Substitution' a -&gt; (Substitution' a, Substitution' a)
</span><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729389"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729391"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729392"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Substitution' a -&gt; Substitution' a)
-&gt; (Substitution' a, Substitution' a)
-&gt; (Substitution' a, Substitution' a)
forall b c d. (b -&gt; c) -&gt; (d, b) -&gt; (d, c)
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><span class="hs-identifier hs-var">second</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#Strengthen"><span class="hs-identifier hs-var">Strengthen</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729390"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729389"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Substitution' a, Substitution' a)
 -&gt; (Substitution' a, Substitution' a))
-&gt; (Substitution' a, Substitution' a)
-&gt; (Substitution' a, Substitution' a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-237"></span><span>                </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; (Substitution' a, Substitution' a)
forall a.
Nat -&gt; Substitution' a -&gt; (Substitution' a, Substitution' a)
</span><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#Strengthen"><span class="hs-identifier hs-var">Strengthen</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729390"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729391"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729389"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729392"><span class="hs-identifier hs-var">rho</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#%2B%2B%23"><span class="hs-operator hs-type">++#</span></a></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span id="local-6989586621681729000"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#%2B%2B%23"><span class="hs-operator hs-type">(++#)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.DeBruijn.html#DeBruijn"><span class="hs-identifier hs-type">DeBruijn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729000"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681729000"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729000"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729000"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-242"></span><span id="local-6989586621681729397"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681729397"><span class="hs-identifier hs-var">us</span></a></span></span><span> </span><span id="%2B%2B%23"><span class="annot"><span class="annottext">++# :: forall a. DeBruijn a =&gt; [a] -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#%2B%2B%23"><span class="hs-operator hs-var hs-var">++#</span></a></span></span><span> </span><span id="local-6989586621681729398"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729398"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Substitution' a -&gt; Substitution' a)
-&gt; Substitution' a -&gt; [a] -&gt; Substitution' a
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Substitution' a -&gt; Substitution' a
forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var">consS</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729398"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681729397"><span class="hs-identifier hs-var">us</span></a></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-comment">-- | @</span><span>
</span><span id="line-245"></span><span class="hs-comment">--      &#915; &#8866; &#961; : &#916;  &#915; &#8866; reverse vs : &#920;</span><span>
</span><span id="line-246"></span><span class="hs-comment">--      ----------------------------- (treating Nothing as having any type)</span><span>
</span><span id="line-247"></span><span class="hs-comment">--        &#915; &#8866; prependS vs &#961; : &#916;, &#920;</span><span>
</span><span id="line-248"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-249"></span><span id="local-6989586621681729026"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#prependS"><span class="hs-identifier hs-type">prependS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.DeBruijn.html#DeBruijn"><span class="hs-identifier hs-type">DeBruijn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729026"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html#Impossible"><span class="hs-identifier hs-type">Impossible</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621681729026"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729026"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729026"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-250"></span><span id="prependS"><span class="annot"><span class="annottext">prependS :: forall a.
DeBruijn a =&gt;
Impossible -&gt; [Maybe a] -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#prependS"><span class="hs-identifier hs-var hs-var">prependS</span></a></span></span><span> </span><span id="local-6989586621681729409"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729409"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span id="local-6989586621681729410"><span class="annot"><span class="annottext">[Maybe a]
</span><a href="#local-6989586621681729410"><span class="hs-identifier hs-var">us</span></a></span></span><span> </span><span id="local-6989586621681729411"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729411"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; [Maybe a] -&gt; Substitution' a
</span><a href="#local-6989586621681729412"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[Maybe a]
</span><a href="#local-6989586621681729410"><span class="hs-identifier hs-var">us</span></a></span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-comment">-- The function strengthenS' is not used here, to avoid replacing</span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-comment">-- the &quot;error message&quot; of a potential outermost Strengthen</span><span>
</span><span id="line-254"></span><span>  </span><span class="hs-comment">-- constructor in rho.</span><span>
</span><span id="line-255"></span><span>  </span><span id="local-6989586621681729413"><span class="annot"><span class="annottext">str :: Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="#local-6989586621681729413"><span class="hs-identifier hs-var hs-var">str</span></a></span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' a -&gt; Substitution' a
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-256"></span><span>  </span><span class="annot"><a href="#local-6989586621681729413"><span class="hs-identifier hs-var">str</span></a></span><span> </span><span id="local-6989586621681729415"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729415"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#Strengthen"><span class="hs-identifier hs-var">Strengthen</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729409"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729415"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span>  </span><span id="local-6989586621681729412"><span class="annot"><span class="annottext">go :: Nat -&gt; [Maybe a] -&gt; Substitution' a
</span><a href="#local-6989586621681729412"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621681729416"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729416"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681729417"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729417"><span class="hs-identifier hs-var">u</span></a></span></span><span>  </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681729418"><span class="annot"><span class="annottext">[Maybe a]
</span><a href="#local-6989586621681729418"><span class="hs-identifier hs-var">us</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="#local-6989586621681729413"><span class="hs-identifier hs-var">str</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729416"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Substitution' a -&gt; Substitution' a
forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var">consS</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729417"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; [Maybe a] -&gt; Substitution' a
</span><a href="#local-6989586621681729412"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[Maybe a]
</span><a href="#local-6989586621681729418"><span class="hs-identifier hs-var">us</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>  </span><span class="annot"><a href="#local-6989586621681729412"><span class="hs-identifier hs-var">go</span></a></span><span>  </span><span id="local-6989586621681729419"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729419"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681729420"><span class="annot"><span class="annottext">[Maybe a]
</span><a href="#local-6989586621681729420"><span class="hs-identifier hs-var">us</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; [Maybe a] -&gt; Substitution' a
</span><a href="#local-6989586621681729412"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729419"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Maybe a]
</span><a href="#local-6989586621681729420"><span class="hs-identifier hs-var">us</span></a></span><span>
</span><span id="line-260"></span><span>  </span><span class="annot"><a href="#local-6989586621681729412"><span class="hs-identifier hs-var">go</span></a></span><span>  </span><span id="local-6989586621681729421"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729421"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="#local-6989586621681729413"><span class="hs-identifier hs-var">str</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729421"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729411"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span class="hs-comment">-- | @</span><span>
</span><span id="line-263"></span><span class="hs-comment">--        &#915; &#8866; reverse vs : &#916;</span><span>
</span><span id="line-264"></span><span class="hs-comment">--      -----------------------------</span><span>
</span><span id="line-265"></span><span class="hs-comment">--        &#915; &#8866; parallelS vs &#961; : &#915;, &#916;</span><span>
</span><span id="line-266"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-267"></span><span class="hs-comment">--</span><span>
</span><span id="line-268"></span><span class="hs-comment">--   Note the @&#915;@ in @&#915;, &#916;@.</span><span>
</span><span id="line-269"></span><span id="local-6989586621681729029"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#parallelS"><span class="hs-identifier hs-type">parallelS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.DeBruijn.html#DeBruijn"><span class="hs-identifier hs-type">DeBruijn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729029"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681729029"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729029"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-270"></span><span id="parallelS"><span class="annot"><span class="annottext">parallelS :: forall a. DeBruijn a =&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#parallelS"><span class="hs-identifier hs-var hs-var">parallelS</span></a></span></span><span> </span><span id="local-6989586621681729425"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681729425"><span class="hs-identifier hs-var">us</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681729425"><span class="hs-identifier hs-var">us</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Substitution' a -&gt; Substitution' a
forall a. DeBruijn a =&gt; [a] -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#%2B%2B%23"><span class="hs-operator hs-var">++#</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
forall a. Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-var">idS</span></a></span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="annot"><span class="hs-comment">-- | &#915; &#8866; (strengthenS &#8869; |&#916;|) : &#915;,&#916;</span></span><span>
</span><span id="line-273"></span><span id="local-6989586621681728948"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#strengthenS"><span class="hs-identifier hs-type">strengthenS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html#Impossible"><span class="hs-identifier hs-type">Impossible</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728948"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-274"></span><span id="strengthenS"><span class="annot"><span class="annottext">strengthenS :: forall a. Impossible -&gt; Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#strengthenS"><span class="hs-identifier hs-var hs-var">strengthenS</span></a></span></span><span> </span><span id="local-6989586621681729430"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729430"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span id="local-6989586621681729431"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729431"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729431"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-275"></span><span>  </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Substitution' a
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-276"></span><span>  </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Substitution' a
forall a. Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-var">idS</span></a></span><span>
</span><span id="line-277"></span><span>  </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#Strengthen"><span class="hs-identifier hs-var">Strengthen</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729430"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729431"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
forall a. Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-var">idS</span></a></span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span class="hs-comment">-- | A \&quot;smart\&quot; variant of 'Strengthen'. If 'strengthenS' is applied</span><span>
</span><span id="line-280"></span><span class="hs-comment">-- to a substitution with an outermost 'Strengthen' constructor, then</span><span>
</span><span id="line-281"></span><span class="hs-comment">-- the \&quot;error message\&quot; of that constructor is discarded in favour of</span><span>
</span><span id="line-282"></span><span class="hs-comment">-- the 'Impossible' argument of this function.</span><span>
</span><span id="line-283"></span><span id="local-6989586621681729434"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#strengthenS%27"><span class="hs-identifier hs-type">strengthenS'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html#Impossible"><span class="hs-identifier hs-type">Impossible</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729434"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729434"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-284"></span><span id="strengthenS%27"><span class="annot"><span class="annottext">strengthenS' :: forall a. Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#strengthenS%27"><span class="hs-identifier hs-var hs-var">strengthenS'</span></a></span></span><span> </span><span id="local-6989586621681729441"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729441"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span id="local-6989586621681729442"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729442"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681729443"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729443"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729442"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-285"></span><span>  </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Substitution' a
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-286"></span><span>  </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729443"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-287"></span><span>  </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729443"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-288"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#Strengthen"><span class="hs-identifier hs-type">Strengthen</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681729444"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729444"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681729445"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729445"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#Strengthen"><span class="hs-identifier hs-var">Strengthen</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729441"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729442"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729444"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729445"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-289"></span><span>    </span><span class="annot"><span class="annottext">Substitution' a
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Impossible -&gt; Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#Strengthen"><span class="hs-identifier hs-var">Strengthen</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729441"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729442"><span class="hs-identifier hs-var">m</span></a></span><span>       </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729443"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#lookupS"><span class="hs-pragma hs-type">lookupS</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-292"></span><span id="local-6989586621681729010"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#lookupS"><span class="hs-identifier hs-type">lookupS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#EndoSubst"><span class="hs-identifier hs-type">EndoSubst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729010"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729010"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681729010"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-293"></span><span id="lookupS"><span class="annot"><span class="annottext">lookupS :: forall a. EndoSubst a =&gt; Substitution' a -&gt; Nat -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lookupS"><span class="hs-identifier hs-var hs-var">lookupS</span></a></span></span><span> </span><span id="local-6989586621681729483"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729483"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span id="local-6989586621681729484"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729484"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729483"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-294"></span><span>  </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-var">IdS</span></a></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; a
forall a. DeBruijn a =&gt; Nat -&gt; a
</span><a href="Agda.TypeChecking.Substitute.DeBruijn.html#deBruijnVar"><span class="hs-identifier hs-var">deBruijnVar</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729484"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-295"></span><span>  </span><span class="annot"><a href="Agda.Syntax.Internal.html#Wk"><span class="hs-identifier hs-type">Wk</span></a></span><span> </span><span id="local-6989586621681729485"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729485"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-var">IdS</span></a></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681729486"><span class="annot"><span class="annottext">j :: Nat
</span><a href="#local-6989586621681729486"><span class="hs-identifier hs-var hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729484"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729485"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-296"></span><span>                            </span><span class="hs-keyword">if</span><span>  </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729486"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">a
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; a
forall a. DeBruijn a =&gt; Nat -&gt; a
</span><a href="Agda.TypeChecking.Substitute.DeBruijn.html#deBruijnVar"><span class="hs-identifier hs-var">deBruijnVar</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729486"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-297"></span><span>  </span><span class="annot"><a href="Agda.Syntax.Internal.html#Wk"><span class="hs-identifier hs-type">Wk</span></a></span><span> </span><span id="local-6989586621681729487"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729487"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681729488"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729488"><span class="hs-identifier hs-var">rho</span></a></span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg a) -&gt; a -&gt; a
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729487"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution' a -&gt; Nat -&gt; a
forall a. EndoSubst a =&gt; Substitution' a -&gt; Nat -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lookupS"><span class="hs-identifier hs-var">lookupS</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729488"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729484"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-298"></span><span>  </span><span id="local-6989586621681729489"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729489"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#%3A%23"><span class="hs-operator hs-type">:#</span></a></span><span> </span><span id="local-6989586621681729490"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729490"><span class="hs-identifier hs-var">rho</span></a></span></span><span>   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729484"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729489"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-299"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729484"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-300"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Substitution' a -&gt; Nat -&gt; a
forall a. EndoSubst a =&gt; Substitution' a -&gt; Nat -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lookupS"><span class="hs-identifier hs-var">lookupS</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729490"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729484"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>  </span><span class="annot"><a href="Agda.Syntax.Internal.html#Strengthen"><span class="hs-identifier hs-type">Strengthen</span></a></span><span> </span><span id="local-6989586621681729491"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729491"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span id="local-6989586621681729492"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729492"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681729493"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729493"><span class="hs-identifier hs-var">rho</span></a></span></span><span>
</span><span id="line-302"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729484"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-303"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729484"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729492"><span class="hs-identifier hs-var">n</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; a
forall a. Impossible -&gt; a
</span><a href="Agda.Utils.Impossible.html#throwImpossible"><span class="hs-identifier hs-var">throwImpossible</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729491"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-304"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Substitution' a -&gt; Nat -&gt; a
forall a. EndoSubst a =&gt; Substitution' a -&gt; Nat -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lookupS"><span class="hs-identifier hs-var">lookupS</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729493"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729484"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729492"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>  </span><span class="annot"><a href="Agda.Syntax.Internal.html#Lift"><span class="hs-identifier hs-type">Lift</span></a></span><span> </span><span id="local-6989586621681729494"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729494"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681729495"><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729495"><span class="hs-identifier hs-var">rho</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729484"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729494"><span class="hs-identifier hs-var">n</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; a
forall a. DeBruijn a =&gt; Nat -&gt; a
</span><a href="Agda.TypeChecking.Substitute.DeBruijn.html#deBruijnVar"><span class="hs-identifier hs-var">deBruijnVar</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729484"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-306"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; a -&gt; a
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729494"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; a) -&gt; a -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' a -&gt; Nat -&gt; a
forall a. EndoSubst a =&gt; Substitution' a -&gt; Nat -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lookupS"><span class="hs-identifier hs-var">lookupS</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a
</span><a href="#local-6989586621681729495"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729484"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729494"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>  </span><span class="annot"><a href="Agda.Syntax.Internal.html#EmptyS"><span class="hs-identifier hs-type">EmptyS</span></a></span><span> </span><span id="local-6989586621681729496"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729496"><span class="hs-identifier hs-var">err</span></a></span></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; a
forall a. Impossible -&gt; a
</span><a href="Agda.Utils.Impossible.html#throwImpossible"><span class="hs-identifier hs-var">throwImpossible</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729496"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span>
</span><span id="line-310"></span><span class="annot"><span class="hs-comment">-- | lookupS (listS [(x0,t0)..(xn,tn)]) xi = ti, assuming x0 &lt; .. &lt; xn.</span></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span id="local-6989586621681729034"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#listS"><span class="hs-identifier hs-type">listS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#EndoSubst"><span class="hs-identifier hs-type">EndoSubst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729034"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621681729034"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729034"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-314"></span><span id="listS"><span class="annot"><span class="annottext">listS :: forall a. EndoSubst a =&gt; [(Nat, a)] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#listS"><span class="hs-identifier hs-var hs-var">listS</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681729508"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729508"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681729509"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729509"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681729510"><span class="annot"><span class="annottext">[(Nat, a)]
</span><a href="#local-6989586621681729510"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; a -&gt; Substitution' a
forall a. DeBruijn a =&gt; Nat -&gt; a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#singletonS"><span class="hs-identifier hs-var">singletonS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729508"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729509"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' a -&gt; Substitution' a -&gt; Substitution' a
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-operator hs-var">`composeS`</span></a></span><span> </span><span class="annot"><span class="annottext">[(Nat, a)] -&gt; Substitution' a
forall a. EndoSubst a =&gt; [(Nat, a)] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#listS"><span class="hs-identifier hs-var">listS</span></a></span><span> </span><span class="annot"><span class="annottext">[(Nat, a)]
</span><a href="#local-6989586621681729510"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-315"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#listS"><span class="hs-identifier hs-var">listS</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' a
forall a. Substitution' a
</span><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-var">IdS</span></a></span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span class="annot"><span class="hs-comment">-- | @&#915;, &#926;, &#916; &#8866; raiseFromS |&#916;| |&#926;| : &#915;, &#916;@</span></span><span>
</span><span id="line-318"></span><span id="local-6989586621681728941"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#raiseFromS"><span class="hs-identifier hs-type">raiseFromS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681728941"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-319"></span><span id="raiseFromS"><span class="annot"><span class="annottext">raiseFromS :: forall a. Nat -&gt; Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseFromS"><span class="hs-identifier hs-var hs-var">raiseFromS</span></a></span></span><span> </span><span id="local-6989586621681729511"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729511"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681729512"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729512"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729511"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' a -&gt; Substitution' a)
-&gt; Substitution' a -&gt; Substitution' a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621681729512"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span class="hs-comment">---------------------------------------------------------------------------</span><span>
</span><span id="line-323"></span><span class="annot"><span class="hs-comment">-- * Functions on abstractions</span></span><span>
</span><span id="line-324"></span><span class="hs-comment">--   and things we couldn't do before we could define 'absBody'</span><span>
</span><span id="line-325"></span><span class="hs-comment">---------------------------------------------------------------------------</span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span class="annot"><span class="hs-comment">-- | Instantiate an abstraction. Strict in the term.</span></span><span>
</span><span id="line-328"></span><span id="local-6989586621681729037"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#absApp"><span class="hs-identifier hs-type">absApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729037"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729037"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstArg"><span class="hs-identifier hs-type">SubstArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729037"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681729037"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-329"></span><span id="absApp"><span class="annot"><span class="annottext">absApp :: forall a. Subst a =&gt; Abs a -&gt; SubstArg a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absApp"><span class="hs-identifier hs-var hs-var">absApp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span>   </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681729516"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729516"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681729517"><span class="annot"><span class="annottext">SubstArg a
</span><a href="#local-6989586621681729517"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; SubstArg a -&gt; a -&gt; a
forall a. Subst a =&gt; Nat -&gt; SubstArg a -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">SubstArg a
</span><a href="#local-6989586621681729517"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729516"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-330"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#absApp"><span class="hs-identifier hs-var">absApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-type">NoAbs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681729518"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729518"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SubstArg a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729518"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-comment">-- | Instantiate an abstraction. Lazy in the term, which allow it to be</span><span>
</span><span id="line-333"></span><span class="hs-comment">--   __IMPOSSIBLE__ in the case where the variable shouldn't be used but we</span><span>
</span><span id="line-334"></span><span class="hs-comment">--   cannot use 'noabsApp'. Used in Apply.</span><span>
</span><span id="line-335"></span><span id="local-6989586621681729520"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#lazyAbsApp"><span class="hs-identifier hs-type">lazyAbsApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729520"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729520"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#SubstArg"><span class="hs-identifier hs-type">SubstArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729520"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681729520"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-336"></span><span id="lazyAbsApp"><span class="annot"><span class="annottext">lazyAbsApp :: forall a. Subst a =&gt; Abs a -&gt; SubstArg a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lazyAbsApp"><span class="hs-identifier hs-var hs-var">lazyAbsApp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span>   </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681729524"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729524"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681729525"><span class="annot"><span class="annottext">SubstArg a
</span><a href="#local-6989586621681729525"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg a) -&gt; a -&gt; a
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SubstArg a
</span><a href="#local-6989586621681729525"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">SubstArg a
-&gt; Substitution' (SubstArg a) -&gt; Substitution' (SubstArg a)
forall a. a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#%3A%23"><span class="hs-operator hs-var">:#</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg a)
forall a. Substitution' a
</span><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-var">IdS</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729524"><span class="hs-identifier hs-var">v</span></a></span><span>  </span><span class="hs-comment">-- Note: do not use consS here!</span><span>
</span><span id="line-337"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#lazyAbsApp"><span class="hs-identifier hs-var">lazyAbsApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-type">NoAbs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681729526"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729526"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SubstArg a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729526"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span class="annot"><span class="hs-comment">-- | Instantiate an abstraction that doesn't use its argument.</span></span><span>
</span><span id="line-340"></span><span id="local-6989586621681729040"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#noabsApp"><span class="hs-identifier hs-type">noabsApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729040"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html#Impossible"><span class="hs-identifier hs-type">Impossible</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729040"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681729040"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-341"></span><span id="noabsApp"><span class="annot"><span class="annottext">noabsApp :: forall a. Subst a =&gt; Impossible -&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#noabsApp"><span class="hs-identifier hs-var hs-var">noabsApp</span></a></span></span><span> </span><span id="local-6989586621681729529"><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729529"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span>   </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681729530"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729530"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; a -&gt; a
forall a. Subst a =&gt; Impossible -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#strengthen"><span class="hs-identifier hs-var">strengthen</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><a href="#local-6989586621681729529"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729530"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-342"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#noabsApp"><span class="hs-identifier hs-var">noabsApp</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-type">NoAbs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681729531"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729531"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729531"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span id="local-6989586621681729042"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-type">absBody</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729042"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729042"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681729042"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-345"></span><span id="absBody"><span class="annot"><span class="annottext">absBody :: forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var hs-var">absBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span>   </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681729535"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729535"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729535"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-346"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-type">NoAbs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681729536"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729536"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; a -&gt; a
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729536"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span id="local-6989586621681729044"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#mkAbs"><span class="hs-identifier hs-type">mkAbs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729044"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.Lazy.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729044"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#ArgName"><span class="hs-identifier hs-type">ArgName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681729044"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729044"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-349"></span><span id="mkAbs"><span class="annot"><span class="annottext">mkAbs :: forall a. (Subst a, Free a) =&gt; ArgName -&gt; a -&gt; Abs a
</span><a href="Agda.TypeChecking.Substitute.Class.html#mkAbs"><span class="hs-identifier hs-var hs-var">mkAbs</span></a></span></span><span> </span><span id="local-6989586621681729544"><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621681729544"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681729545"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729545"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; a -&gt; Bool
forall a. Free a =&gt; Nat -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Free.html#freeIn"><span class="hs-operator hs-var">`freeIn`</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729545"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; a -&gt; Abs a
forall a. ArgName -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621681729544"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729545"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-350"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; a -&gt; Abs a
forall a. ArgName -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-var">NoAbs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621681729544"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; a -&gt; a
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729545"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span id="local-6989586621681729047"><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#reAbs"><span class="hs-identifier hs-type">reAbs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729047"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.Lazy.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729047"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729047"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681729047"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-353"></span><span id="reAbs"><span class="annot"><span class="annottext">reAbs :: forall a. (Subst a, Free a) =&gt; Abs a -&gt; Abs a
</span><a href="Agda.TypeChecking.Substitute.Class.html#reAbs"><span class="hs-identifier hs-var hs-var">reAbs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-type">NoAbs</span></a></span><span> </span><span id="local-6989586621681729551"><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621681729551"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681729552"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729552"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; a -&gt; Abs a
forall a. ArgName -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-var">NoAbs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621681729551"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729552"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-354"></span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#reAbs"><span class="hs-identifier hs-var">reAbs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span id="local-6989586621681729553"><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621681729553"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681729554"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729554"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; a -&gt; Abs a
forall a. (Subst a, Free a) =&gt; ArgName -&gt; a -&gt; Abs a
</span><a href="Agda.TypeChecking.Substitute.Class.html#mkAbs"><span class="hs-identifier hs-var">mkAbs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621681729553"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681729554"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-355"></span></pre></body></html>